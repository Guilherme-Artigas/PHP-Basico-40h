<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Vari&aacute;veis de fontes externas</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.variables.variable.html">« Vari&aacute;veis vari&aacute;veis</a></li>
      <li style="float: right;"><a href="language.constants.html">Constantes »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.variables.html">Vari&aacute;veis</a></li>
    <li>Vari&aacute;veis de fontes externas</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.variables.external" class="sect1">
   <h2 class="title">Variáveis de fontes externas</h2>

   <div class="sect2" id="language.variables.external.form">
    <h3 class="title">Formulários HTML (GET e POST)</h3>

    <p class="simpara">
     Quando um formulário é submetido para um script PHP, a informação deste
     formulário estará automaticamente disponível ao script. Há
     algumas maneiras de acessar estas informações, por exemplo:
    </p>

    <p class="para">
     <div class="example" id="example-105">
      <p><strong>Exemplo #1 Um formulário HTML simples</strong></p>
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;form action=&quot;foo.php&quot; method=&quot;post&quot;&gt;
    Nome:  &lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;&lt;br /&gt;
    Email: &lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Me aperte!&quot; /&gt;
&lt;/form&gt;</pre>
</div>
      </div>

     </div>
    </p>

    <p class="para">
     A partir do PHP 5.4.0, existem apenas duas formas de acessas dados de formulários PHP.
     Os métodos disponíveis atualmente são listadas a seguir:
    </p>

    <p class="para">
     <div class="example" id="example-106">
      <p><strong>Exemplo #2 Acessando dados de um formulário HTML via POST</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br />echo&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="para">
     Há outras formas de acessar dados enviados pelo usuário nas antigas versões do PHP. Elas
     estão listadas abaixo. Veja a lista de modificações no final da página para mais detalhes.
     <div class="example" id="example-107">
      <p><strong>Exemplo #3 Meios antigos de acessar dados enviados pelo usuário</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;CUIDADO:&nbsp;esses&nbsp;métodos&nbsp;NÃO&nbsp;são&nbsp;mais&nbsp;suportados.<br />//&nbsp;Os&nbsp;válido&nbsp;estão&nbsp;descritos&nbsp;acima<br /><br />//&nbsp;Utilizando&nbsp;import_request_variables()&nbsp;-&nbsp;esta&nbsp;função&nbsp;foi&nbsp;removida&nbsp;no&nbsp;PHP&nbsp;5.4.0<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">import_request_variables</span><span style="color: #007700">(</span><span style="color: #DD0000">'p'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p_'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$p_username</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Essas&nbsp;variáveis&nbsp;pré-definidas&nbsp;foram&nbsp;removidas&nbsp;no&nbsp;PHP&nbsp;5.4.0<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$HTTP_POST_VARS</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;Utilizando&nbsp;register_globals.&nbsp;Este&nbsp;recurso&nbsp;foi&nbsp;removido&nbsp;no&nbsp;in&nbsp;PHP&nbsp;5.4.0<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="para">
     Utilizar um formulário GET é similar, exceto que você usará a variável
     GET pré-definida. GET também se aplica a superglobal
     <em>QUERY_STRING</em> (a informação depois do &#039;?&#039; numa URL). Então,
     por exemplo, <em>http://www.example.com/test.php?id=3</em>
     contém os dados GET que estarão acessíveis com <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET['id']</a></var></var>.
     Veja também <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>.
    </p>

    <blockquote class="note"><p><strong class="note">Nota</strong>: 
     <p class="para">
      Pontos e espaços em nomes de variáveis são convertidos para sublinhados. Por
      exemplo <em>&lt;input name=&quot;a.b&quot; /&gt;</em> se tornará
      <em>$_REQUEST[&quot;a_b&quot;]</em>.
     </p>
    </p></blockquote>

    <p class="para">
     O PHP também entende arrays no contexto de variáveis de formulário
     (veja essa <a href="faq.html.html" class="link">FAQ</a>). Pode-se,
     por exemplo, agrupar variáveis relacionadas, ou utilizar este
     recurso para obter valores de um input select múltiplo. Por
     exemplo, iremos enviar o formulário abaixo para si mesmo, e depois de submetido, mostra
     os dados:
    </p>

    <p class="para">
     <div class="example" id="example-108">
      <p><strong>Exemplo #4 Variáveis de formulários mais complexos</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;pre&gt;'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&lt;/pre&gt;'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;form&nbsp;action=""&nbsp;method="post"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;Nome:&nbsp;&nbsp;&lt;input&nbsp;type="text"&nbsp;name="personal[name]"&nbsp;/&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;Email:&nbsp;&lt;input&nbsp;type="text"&nbsp;name="personal[email]"&nbsp;/&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;Cerveja:&nbsp;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;multiple&nbsp;name="beer[]"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="antartica"&gt;Antartica&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="brahma"&gt;Brahma&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;option&nbsp;value="skol"&gt;Skol&lt;/option&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="Enviar&nbsp;dados!"&nbsp;/&gt;<br />&lt;/form&gt;</span>
</code></div>
      </div>

     </div>
    </p>

    <div class="sect3" id="language.variables.external.form.submit">
     <h4 class="title">Nomes de variáveis SUBMIT IMAGE</h4>

     <p class="simpara">
      Ao submeter um formulário, é possível de utilizar imagens em vez
      do botão de submit padrão com uma tag do tipo:
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input type=&quot;image&quot; src=&quot;image.gif&quot; name=&quot;sub&quot; /&gt;</pre>
</div>
      </div>

     </div>

     <p class="simpara">
      Quando o usuário clicar em algum lugar da imagem, o formulário
      será transmitido para o servidor com duas variáveis
      adicionais, <var class="varname"><var class="varname">sub_x</var></var> and <var class="varname"><var class="varname">sub_y</var></var>.
      Elas contém as coordenadas do
      clique do usuário na imagem. Os mais experientes percebem que os
      atuais nomes dessas variáveis enviadas ao navegador contém um ponto
      ao invés de um sublinhado, mas o PHP converte o ponto para um
      sublinhado automaticamente.
     </p>
    </div>

   </div>

   <div class="sect2" id="language.variables.external.cookies">
    <h3 class="title">Cookies HTTP</h3>

    <p class="simpara">
     O PHP suporta transparentemente cookies HTTP como os definidos pela <a href="http://www.faqs.org/rfcs/rfc6265" class="link external">&raquo;&nbsp;RFC 6265</a>. Cookies são um
     mecanismo o armazenamento de dados no navegador,
     rastreando ou identificando o retorno de usuários. Você pode definir cookies com
     a função <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span>. Cookies são parte do
     cabeçalho HTTP, então a função SetCookie precisa ser chamada antes
     de qualquer saída ser enviada ao navegador. Esta é a mesma restrição
     da função <span class="function"><a href="function.header.html" class="function">header()</a></span>. Dados de cookies
     estão disponíveis nos arrays de dados de cookies apropriados,
     como <var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var></var> e também em <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>.
     Veja o manual de <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span> para mais detalhes e
     exemplos.
    </p>

    <p class="simpara">
     Se você deseja atribuir vários valores para uma única variável do cookie, você
     pode fazer dele um array:
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"MeuCookie[foo]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Testando&nbsp;1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"MeuCookie[bar]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Testando&nbsp;2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

    <p class="simpara">
     Isso irá criar dois cookies separados enquanto que <var class="varname"><var class="varname">MeuCookie</var></var> será
     um único array em seu script. Se quiser definir apenas um cookie com
     vários valores, considere utilizar <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span> ou
     <span class="function"><a href="function.explode.html" class="function">explode()</a></span> nos valores primeiro.
    </p>

    <p class="simpara">
     Note que um cookie substituirá um anterior com o mesmo
     nome em seu navegador, a menos que o nome ou o caminho seja diferente. Então,
     para uma aplicação de carrinho de compras em que se quer ter um contador
     e repassá-lo:
    </p>

    <div class="example" id="example-109">
     <p><strong>Exemplo #5 Exemplo <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]&nbsp;+&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">'count'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cart[</span><span style="color: #0000BB">$count</span><span style="color: #DD0000">]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

   </div>

   <div class="sect2" id="language.variables.external.dot-in-names">
    <h3 class="title">Pontos em nomes de variáveis postadas</h3>

    <p class="para">
     Normalmente o PHP não altera o nome de variáveis quando elas
     são passadas para o script. Entretanto, é necessário notar que o
     ponto (ponto final) não é um caractere válido no nomes de
     variáveis do PHP. Para ilustrar, veja o seguinte exemplo:
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$varname</span><span style="color: #007700">.</span><span style="color: #0000BB">ext</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;nome&nbsp;de&nbsp;variável&nbsp;inválido&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     Dessa forma, o interpretador entende isso como uma variável nomeada
     <var class="varname"><var class="varname">$varname</var></var>, seguida do operador de concatenação
     de strings, seguida de uma string crua (uma string não delimitada que
     não bate com nenhuma palavra-chave ou reservada) &#039;ext&#039;. Obviamente,
     isso não tem os resultados pretendidos.
    </p>

    <p class="para">
     Nessa situação, é importante notar que o PHP
     substituirá automaticamente qualquer ponto nos nomes de variáveis recebidas por
     sublinhados.
    </p>

   </div>

   <div class="sect2" id="language.variables.determining-type-of">
    <h3 class="title">Determinando o tipo das variáveis</h3>

    <p class="para">
     Como o PHP determina os tipos de variáveis e faz conversões
     (geralmente) quando necessárias, nem sempre é óbvio o tipo de uma variável
     em todos os momentos. O PHP incluí várias funções
     que permitem determinar qual o tipo de uma variável, por exemplo:
     <span class="function"><a href="function.gettype.html" class="function">gettype()</a></span>, <span class="function"><a href="function.is-array.html" class="function">is_array()</a></span>,
     <span class="function"><a href="function.is-float.html" class="function">is_float()</a></span>, <span class="function"><a href="function.is-int.html" class="function">is_int()</a></span>,
     <span class="function"><a href="function.is-object.html" class="function">is_object()</a></span>, e
     <span class="function"><a href="function.is-string.html" class="function">is_string()</a></span>. Veja também o capítulo
     <a href="language.types.html" class="link">Tipos</a>.
    </p>
   </div>

   <div class="sect2" id="language.variables.external.changelog">
    <h3 class="title">Changelog</h3>

    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>Versão</th>
         <th>Descrição</th>
        </tr>

       </thead>

       <tbody class="tbody">
        <tr>
         <td>5.4.0</td>
         <td>
          <a href="security.globals.html" class="link">Register Globals</a>,
          <a href="security.magicquotes.html" class="link">Magic Quotes</a> e
          <a href="ini.core.html#ini.register-long-arrays" class="link">register_long_arrays</a>
          foram removidos
         </td>
        </tr>

        <tr>
         <td>5.3.0</td>
         <td>
          <a href="security.globals.html" class="link">Register Globals</a>,
          <a href="security.magicquotes.html" class="link">Magic Quotes</a> e
          <a href="ini.core.html#ini.register-long-arrays" class="link">register_long_arrays</a>
          estão obsoletos
         </td>
        </tr>

        <tr>
         <td>4.2.0</td>
         <td>
          A diretiva <a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
          foi padronizada para <em class="emphasis">off</em>.
         </td>
        </tr>

        <tr>
         <td>4.1.0</td>
         <td>
          Os <a href="language.variables.superglobals.html" class="link">Arrays superglobais</a>,
          <var class="varname"><var class="varname"><a href="reserved.variables.post.html" class="classname">$_POST</a></var></var> e <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var> estão
          disponíveis.
         </td>
        </tr>

       </tbody>
      
     </table>

    </p>
   </div>

  </div></div></div></body></html>